/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/lib0@0.2.117/encoding.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const t=Math.floor,s=Math.abs,e=(t,s)=>t>s?t:s,n=127,o=255,r=Number.isInteger||(s=>"number"==typeof s&&isFinite(s)&&t(s)===s),c=Array.isArray,i="undefined"!=typeof TextEncoder?new TextEncoder:null,h=i?t=>i.encode(t):t=>{const s=unescape(encodeURIComponent(t)),e=s.length,n=new Uint8Array(e);for(let t=0;t<e;t++)n[t]=s.codePointAt(t);return n};let u="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});u&&1===u.decode(new Uint8Array).length&&(u=null);class l{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const f=()=>new l,a=t=>{const s=f();return t(s),w(s)},b=t=>{let s=t.cpos;for(let e=0;e<t.bufs.length;e++)s+=t.bufs[e].length;return s},d=t=>t.cpos>0||t.bufs.length>0,w=t=>{const s=new Uint8Array(b(t));let e=0;for(let n=0;n<t.bufs.length;n++){const o=t.bufs[n];s.set(o,e),e+=o.length}return s.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),e),s},g=(t,s)=>{const n=t.cbuf.length;n-t.cpos<s&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(2*e(n,s)),t.cpos=0)},p=(t,s)=>{const e=t.cbuf.length;t.cpos===e&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(2*e),t.cpos=0),t.cbuf[t.cpos++]=s},y=(t,s,e)=>{let n=null;for(let e=0;e<t.bufs.length&&null===n;e++){const o=t.bufs[e];s<o.length?n=o:s-=o.length}null===n&&(n=t.cbuf),n[s]=e},A=p,U=y,x=(t,s)=>{p(t,s&o),p(t,s>>>8&o)},k=(t,s,e)=>{y(t,s,e&o),y(t,s+1,e>>>8&o)},I=(t,s)=>{for(let e=0;e<4;e++)p(t,s&o),s>>>=8},m=(t,s)=>{for(let e=3;e>=0;e--)p(t,s>>>8*e&o)},E=(t,s,e)=>{for(let n=0;n<4;n++)y(t,s+n,e&o),e>>>=8},F=(s,e)=>{for(;e>n;)p(s,128|n&e),e=t(e/128);p(s,n&e)},B=(s,e)=>{const o=0!==(r=e)?r<0:1/r<0;var r;for(o&&(e=-e),p(s,(e>63?128:0)|(o?64:0)|63&e),e=t(e/64);e>0;)p(s,(e>n?128:0)|n&e),e=t(e/128)},D=new Uint8Array(3e4),T=D.length/3,j=(t,s)=>{if(s.length<T){const e=i.encodeInto(s,D).written||0;F(t,e);for(let s=0;s<e;s++)p(t,D[s])}else V(t,h(s))},v=(t,s)=>{const e=unescape(encodeURIComponent(s)),n=e.length;F(t,n);for(let s=0;s<n;s++)p(t,e.codePointAt(s))},M=i&&i.encodeInto?j:v,C=(t,s)=>O(t,h(s)),O=(t,s)=>{for(let e=0;e<s.length;e++){const n=s[e];0!==n&&1!==n||p(t,1),p(t,s[e])}p(t,0)},P=(t,s)=>R(t,w(s)),R=(t,s)=>{const n=t.cbuf.length,o=t.cpos,r=(c=n-o,i=s.length,c<i?c:i);var c,i;const h=s.length-r;t.cbuf.set(s.subarray(0,r),o),t.cpos+=r,h>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(e(2*n,h)),t.cbuf.set(s.subarray(r)),t.cpos=h)},V=(t,s)=>{F(t,s.byteLength),R(t,s)},L=(t,s)=>{g(t,s);const e=new DataView(t.cbuf.buffer,t.cpos,s);return t.cpos+=s,e},N=(t,s)=>L(t,4).setFloat32(0,s,!1),q=(t,s)=>L(t,8).setFloat64(0,s,!1),z=(t,s)=>L(t,8).setBigInt64(0,s,!1),G=(t,s)=>L(t,8).setBigUint64(0,s,!1),H=new DataView(new ArrayBuffer(4)),J=(t,e)=>{switch(typeof e){case"string":p(t,119),M(t,e);break;case"number":r(e)&&s(e)<=2147483647?(p(t,125),B(t,e)):(n=e,H.setFloat32(0,n),H.getFloat32(0)===n?(p(t,124),N(t,e)):(p(t,123),q(t,e)));break;case"bigint":p(t,122),z(t,e);break;case"object":if(null===e)p(t,126);else if(c(e)){p(t,117),F(t,e.length);for(let s=0;s<e.length;s++)J(t,e[s])}else if(e instanceof Uint8Array)p(t,116),V(t,e);else{p(t,118);const s=Object.keys(e);F(t,s.length);for(let n=0;n<s.length;n++){const o=s[n];M(t,o),J(t,e[o])}}break;case"boolean":p(t,e?120:121);break;default:p(t,127)}var n};class K extends l{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&F(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}class Q extends l{constructor(t){super(),this.s=t}write(t){B(this,t-this.s),this.s=t}}class S extends l{constructor(t){super(),this.s=t,this.count=0}write(t){this.s===t&&this.count>0?this.count++:(this.count>0&&F(this,this.count-1),this.count=1,B(this,t-this.s),this.s=t)}}const W=t=>{t.count>0&&(B(t.encoder,1===t.count?t.s:-t.s),t.count>1&&F(t.encoder,t.count-2))};class X{constructor(){this.encoder=new l,this.s=0,this.count=0}write(t){this.s===t?this.count++:(W(this),this.count=1,this.s=t)}toUint8Array(){return W(this),w(this.encoder)}}class Y{constructor(){this.encoder=new l,this.s=0,this.count=0}write(t){this.s+this.count===t?this.count++:(W(this),this.count=1,this.s=t)}toUint8Array(){return W(this),w(this.encoder)}}const Z=t=>{if(t.count>0){const s=2*t.diff+(1===t.count?0:1);B(t.encoder,s),t.count>1&&F(t.encoder,t.count-2)}};class ${constructor(){this.encoder=new l,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Z(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Z(this),w(this.encoder)}}class _{constructor(){this.sarr=[],this.s="",this.lensE=new X}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new l;return this.sarr.push(this.s),this.s="",M(t,this.sarr.join("")),R(t,this.lensE.toUint8Array()),w(t)}}export{l as Encoder,Y as IncUintOptRleEncoder,Q as IntDiffEncoder,$ as IntDiffOptRleEncoder,K as RleEncoder,S as RleIntDiffEncoder,_ as StringEncoder,X as UintOptRleEncoder,j as _writeVarStringNative,v as _writeVarStringPolyfill,f as createEncoder,a as encode,d as hasContent,b as length,y as set,k as setUint16,E as setUint32,U as setUint8,w as toUint8Array,g as verifyLen,p as write,J as writeAny,z as writeBigInt64,G as writeBigUint64,P as writeBinaryEncoder,N as writeFloat32,q as writeFloat64,L as writeOnDataView,C as writeTerminatedString,O as writeTerminatedUint8Array,x as writeUint16,I as writeUint32,m as writeUint32BigEndian,A as writeUint8,R as writeUint8Array,B as writeVarInt,M as writeVarString,F as writeVarUint,V as writeVarUint8Array};export default null;
//# sourceMappingURL=/sm/dba4cb1542709e2c4f022de533ff4cc40c1ae8b2a54a276206c0fb69befa4f33.map